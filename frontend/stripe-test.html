<!DOCTYPE html>
<html>
<head>
  <title>Stripe Integration Test</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
    button { padding: 10px 20px; background: #4CAF50; color: white; border: none; cursor: pointer; margin: 5px; }
    pre { background: #f5f5f5; padding: 10px; overflow: auto; }
  </style>
</head>
<body>
  <h1>Stripe Integration Test</h1>
  
  <div>
    <button id="testAPI">Test API Response</button>
    <button id="directStripe">Try Direct Stripe Redirect</button>
  </div>
  
  <h3>Response:</h3>
  <pre id="result">Click a button to test...</pre>
  
  <script>
    document.getElementById('testAPI').addEventListener('click', async () => {
      const resultDiv = document.getElementById('result');
      resultDiv.textContent = 'Testing test-checkout endpoint...';
      try {
        const response = await fetch('https://aiviralcontent-api.onrender.com/test-checkout', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'}
        });
        const data = await response.json();
        console.log('API Response:', data);
        if (data.checkout_url) {
          window.location.href = data.checkout_url;
        } else {
          console.error('No checkout URL in response:', data);
          resultDiv.textContent = 'No checkout URL received.';
        }
      } catch (error) {
        console.error('Checkout error:', error);
        resultDiv.textContent = 'Unable to load checkout. Please try again.';
      }
    });
    
    document.getElementById('directStripe').addEventListener('click', async () => {
      const resultDiv = document.getElementById('result');
      resultDiv.textContent = 'Testing direct Stripe redirect...';
      
      try {
        window.location.href = 'https://buy.stripe.com/test_00g5lO2mccUT4ww5kk';
      } catch (error) {
        resultDiv.textContent = `Error: ${error.message}`;
      }
    });
  </script>
</body>
</html>
